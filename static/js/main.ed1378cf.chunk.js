(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{12:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return J}));var r={};n.r(r),n.d(r,"getIsLoggedIn",(function(){return a})),n.d(r,"getUsername",(function(){return u})),n.d(r,"getLoading",(function(){return i})),n.d(r,"getError",(function(){return o}));var c={};n.r(c),n.d(c,"register",(function(){return z})),n.d(c,"logIn",(function(){return R})),n.d(c,"logOut",(function(){return B})),n.d(c,"fetchCurrentUser",(function(){return M}));var a=function(t){return t.auth.isLoggedIn},u=function(t){return t.auth.user.name},i=function(t){return t.auth.isLoading},o=function(t){return t.auth.error},s=n(16),b=n.n(s),j=n(29),l=n(21),d=n.n(l),f=n(5),O=Object(f.b)("register/registerRequest"),h=Object(f.b)("register/registerSuccess"),p=Object(f.b)("register/registerError"),g=Object(f.b)("login/loginRequest"),v=Object(f.b)("login/loginSuccess"),x=Object(f.b)("login/loginError"),m=Object(f.b)("logout/logoutRequest"),N=Object(f.b)("logout/logoutSuccess"),k=Object(f.b)("logout/logoutError"),_=Object(f.b)("auth/fetchCurrentUserRequest"),L=Object(f.b)("auth/fetchCurrentUserSuccess"),y=Object(f.b)("auth/fetchCurrentUserError"),w=n(19);d.a.defaults.baseURL="https://connections-api.herokuapp.com";var C,A,I,S,U,T=function(t){d.a.defaults.headers.common.Authorization="Bearer ".concat(t)},E=function(){d.a.defaults.headers.common.Authorization=""},z=function(t){return function(){var e=Object(j.a)(b.a.mark((function e(n){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O()),e.prev=1,e.next=4,d.a.post("/users/signup",t);case 4:r=e.sent,c=r.data,T(c.token),n(h(c)),e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(1),n(p(e.t0)),400!==e.t0.response.status){e.next=15;break}return e.abrupt("return",w.b.error("User creation error! Try signup again."));case 15:if(500!==e.t0.response.status){e.next=17;break}return e.abrupt("return",w.b.error("Server error! Try signup again."));case 17:return e.abrupt("return",w.b.error("Something went wrong! Try signup again."));case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},R=function(t){return function(){var e=Object(j.a)(b.a.mark((function e(n){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(g()),e.prev=1,e.next=4,d.a.post("/users/login",t);case 4:r=e.sent,c=r.data,T(c.token),n(v(c)),e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(1),n(x(e.t0)),400!==e.t0.response.status){e.next=15;break}return e.abrupt("return",w.b.error("Login error! Try login again."));case 15:return e.abrupt("return",w.b.error("Something went wrong! Try login again."));case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},B=function(){return function(){var t=Object(j.a)(b.a.mark((function t(e){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(m()),t.prev=1,t.next=4,d.a.post("/users/logout");case 4:E(),e(N()),t.next=16;break;case 8:if(t.prev=8,t.t0=t.catch(1),e(k(t.t0)),401!==t.t0.response.status){t.next=13;break}return t.abrupt("return",w.b.error("Missing header with authorization token!"));case 13:if(500!==t.t0.response.status){t.next=15;break}return t.abrupt("return",w.b.error("Server error! Try logout again."));case 15:return t.abrupt("return",w.b.error("Something went wrong! Try logout again."));case 16:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},M=function(){return function(){var t=Object(j.a)(b.a.mark((function t(e,n){var r,c,a,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),null!==(c=r.auth.token)){t.next=4;break}return t.abrupt("return");case 4:return T(c),e(_()),t.prev=6,t.next=9,d.a.get("/users/current");case 9:a=t.sent,u=a.data,e(L(u)),t.next=20;break;case 14:if(t.prev=14,t.t0=t.catch(6),e(y(t.t0)),401!==t.t0.response.status){t.next=19;break}return t.abrupt("return",w.b.error("Missing header with authorization token! Please try to login or signup"));case 19:return t.abrupt("return",w.b.error("Something went wrong! Try again."));case 20:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}()},F=n(4),q=n(15),H=Object(f.c)({name:null,email:null},(C={},Object(F.a)(C,h,(function(t,e){return e.payload.user})),Object(F.a)(C,v,(function(t,e){return e.payload.user})),Object(F.a)(C,N,(function(){return{name:null,email:null}})),Object(F.a)(C,L,(function(t,e){return e.payload})),C)),D=Object(f.c)(null,(A={},Object(F.a)(A,h,(function(t,e){return e.payload.token})),Object(F.a)(A,v,(function(t,e){return e.payload.token})),Object(F.a)(A,N,(function(){return null})),A)),V=Object(f.c)(!1,(I={},Object(F.a)(I,h,(function(){return!0})),Object(F.a)(I,p,(function(){return!1})),Object(F.a)(I,v,(function(){return!0})),Object(F.a)(I,x,(function(){return!1})),Object(F.a)(I,N,(function(){return!1})),Object(F.a)(I,L,(function(){return!0})),Object(F.a)(I,y,(function(){return!1})),I)),W=Object(f.c)(!1,(S={},Object(F.a)(S,h,(function(){return!1})),Object(F.a)(S,O,(function(){return!0})),Object(F.a)(S,p,(function(){return!1})),Object(F.a)(S,v,(function(){return!1})),Object(F.a)(S,g,(function(){return!0})),Object(F.a)(S,x,(function(){return!1})),Object(F.a)(S,N,(function(){return!1})),Object(F.a)(S,m,(function(){return!0})),Object(F.a)(S,k,(function(){return!1})),Object(F.a)(S,L,(function(){return!1})),Object(F.a)(S,_,(function(){return!0})),Object(F.a)(S,y,(function(){return!1})),S)),G=Object(f.c)(null,(U={},Object(F.a)(U,O,(function(){return null})),Object(F.a)(U,p,(function(t,e){return e.payload})),Object(F.a)(U,g,(function(){return null})),Object(F.a)(U,x,(function(t,e){return e.payload})),Object(F.a)(U,m,(function(){return null})),Object(F.a)(U,k,(function(t,e){return e.payload})),Object(F.a)(U,_,(function(){return null})),Object(F.a)(U,y,(function(t,e){return e.payload})),U)),J=Object(q.b)({user:H,token:D,isLoggedIn:V,isLoading:W,error:G})},121:function(t,e,n){},123:function(t,e,n){},124:function(t,e,n){},125:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n.n(r),a=n(31),u=n.n(a),i=n(11),o=n(23),s=n(59),b=n(43),j=n(5),l=n(28),d=n(60),f=n.n(d),O=n(49),h=n(12),p=Object(b.a)(Object(j.d)({serializableCheck:{ignoredActions:[l.a,l.f,l.b,l.c,l.d,l.e]}})),g={key:"auth",storage:f.a,whitelist:["token"]},v=Object(j.a)({reducer:{auth:Object(l.g)(g,h.b),contacts:O.b},middleware:p,devTools:!1}),x=Object(l.h)(v),m=n(9),N=n(32),k=n(40),_=n(3),L=["children","redirectTo"];function y(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=Object(k.a)(t,L),a=Object(i.c)(h.c.getIsLoggedIn);return Object(_.jsx)(m.b,Object(N.a)(Object(N.a)({},c),{},{children:a?e:Object(_.jsx)(m.a,{to:r})}))}var w=["children","restricted","redirectTo"];function C(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectTo,a=void 0===c?"/":c,u=Object(k.a)(t,w),o=Object(i.c)(h.c.getIsLoggedIn)&&r;return Object(_.jsx)(m.b,Object(N.a)(Object(N.a)({},u),{},{children:o?Object(_.jsx)(m.a,{to:a}):e}))}var A=n(26),I=n.n(A),S=function(){var t=Object(i.c)(h.c.getIsLoggedIn);return Object(_.jsx)("nav",{className:I.a.Navigation,children:Object(_.jsxs)("ul",{className:I.a.NavList,children:[Object(_.jsx)("li",{className:I.a.NavListItem,children:Object(_.jsx)(o.b,{exact:!0,to:"/",className:I.a.link,activeClassName:I.a.activeLink,children:"Home"})}),t&&Object(_.jsx)("li",{className:I.a.NavListItem,children:Object(_.jsx)(o.b,{to:"/contacts",className:I.a.link,activeClassName:I.a.activeLink,children:"Contacts"})})]})})},U=n(27),T=n.n(U),E=function(){return Object(_.jsx)("div",{className:T.a.AuthNav,children:Object(_.jsxs)("ul",{className:T.a.AuthNavList,children:[Object(_.jsx)("li",{className:T.a.AuthNavListItem,children:Object(_.jsx)(o.b,{to:"/register",exact:!0,className:T.a.link,activeClassName:T.a.activeLink,children:"Signup"})}),Object(_.jsx)("li",{className:T.a.AuthNavListItem,children:Object(_.jsx)(o.b,{to:"/login",exact:!0,className:T.a.link,activeClassName:T.a.activeLink,children:"Login"})})]})})},z=n(141),R=n(142),B=n(36),M=n.n(B),F=Object(R.a)(z.a)({background:"white",color:"#30d5c8",width:28,height:28,marginRight:4,borderRadius:"50%",padding:4,fontSize:16,border:0,boxShadow:"0px 3px 3px rgba(0, 0, 0, 0.15)"});function q(){var t=Object(i.b)(),e=Object(i.c)(h.c.getUsername);return Object(_.jsxs)("div",{className:M.a.UserMenu,children:[Object(_.jsxs)("div",{className:M.a.UserName,children:[Object(_.jsx)(F,{children:e[0]}),Object(_.jsx)("span",{className:M.a.Name,children:e})]}),Object(_.jsx)("button",{type:"button",className:M.a.btn,onClick:function(){return t(h.a.logOut())},children:"Log out"})]})}var H=n(47),D=n.n(H);function V(){var t=Object(i.c)(h.c.getIsLoggedIn);return Object(_.jsx)("header",{className:D.a.Header,children:Object(_.jsxs)("div",{className:D.a.AppBar,children:[Object(_.jsx)(S,{}),t?Object(_.jsx)(q,{}):Object(_.jsx)(E,{})]})})}var W=n(61),G=n.n(W),J=function(t){var e=t.children;return Object(_.jsx)("div",{className:G.a.container,children:e})},P=function(t){var e=t.children;return Object(_.jsx)(J,{children:e})},Y=n(62),X=n.n(Y),Z=n(63);function K(){return Object(_.jsx)(X.a,{showUnder:160,style:{position:"fixed",bottom:20,right:20,cursor:"pointer",transitionDuration:"0.2s",transitionTimingFunction:"linear",transitionDelay:"0s",backgroundColor:"#30d5c8",borderRadius:"50%",padding:15,width:44,height:44,scrollBehavior:"smooth"},children:Object(_.jsx)(Z.a,{style:{color:"white"}})})}var Q=n(50),$=n(19),tt=(n(120),n(121),Object(r.lazy)((function(){return n.e(1).then(n.bind(null,170))}))),et=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,171))})),nt=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,169))})),rt=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,172))})),ct=Object(r.lazy)((function(){return Promise.all([n.e(8),n.e(0)]).then(n.bind(null,168))}));var at=function(){var t=Object(i.b)(),e=Object(i.c)(h.c.getLoading);return Object(r.useEffect)((function(){t(h.a.fetchCurrentUser())}),[t]),!e&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(V,{}),Object(_.jsxs)(P,{children:[Object(_.jsx)(K,{}),Object(_.jsx)(r.Suspense,{fallback:Object(_.jsx)(Q.a,{}),children:Object(_.jsxs)(m.d,{children:[Object(_.jsx)(C,{path:"/",exact:!0,children:Object(_.jsx)(tt,{})}),Object(_.jsx)(C,{path:"/register",redirectTo:"/contacts",restricted:!0,children:Object(_.jsx)(et,{})}),Object(_.jsx)(C,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(_.jsx)(rt,{})}),Object(_.jsx)(y,{path:"/contacts",redirectTo:"/login",children:Object(_.jsx)(ct,{})}),Object(_.jsx)(m.b,{children:Object(_.jsx)(nt,{})})]})}),Object(_.jsx)($.a,{autoClose:3e3,position:"top-center"})]})]})};n(122),n(123),n(124);u.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(i.a,{store:v,children:Object(_.jsx)(s.a,{loading:null,persistor:x,children:Object(_.jsx)(o.a,{children:Object(_.jsx)(at,{})})})})}),document.getElementById("root"))},26:function(t,e,n){t.exports={NavList:"Navigation_NavList__1zINO",NavListItem:"Navigation_NavListItem__2AXG5",link:"Navigation_link__2VpuW",activeLink:"Navigation_activeLink__3B0Zg Navigation_link__2VpuW"}},27:function(t,e,n){t.exports={AuthNavList:"AuthNav_AuthNavList__meLvN",AuthNavListItem:"AuthNav_AuthNavListItem__1ueGE",link:"AuthNav_link__2i-ut",activeLink:"AuthNav_activeLink__3kn1y AuthNav_link__2i-ut"}},36:function(t,e,n){t.exports={UserMenu:"UserMenu_UserMenu__3Ajia",UserName:"UserMenu_UserName__2mbgC",Name:"UserMenu_Name__1FDje",btn:"UserMenu_btn__3eAbC"}},47:function(t,e,n){t.exports={AppBar:"AppBar_AppBar__990Yg",Header:"AppBar_Header__3CLCa"}},49:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return S}));var r={};n.r(r),n.d(r,"fetchContacts",(function(){return f})),n.d(r,"addContact",(function(){return O})),n.d(r,"deleteContact",(function(){return h}));var c={};n.r(c),n.d(c,"getContacts",(function(){return g})),n.d(c,"getFilter",(function(){return v})),n.d(c,"getLoading",(function(){return x})),n.d(c,"getError",(function(){return m})),n.d(c,"getVisibleContactsSortByName",(function(){return N}));var a=n(16),u=n.n(a),i=n(29),o=n(21),s=n.n(o),b=n(7);s.a.defaults.baseURL="http://localhost:3000";var j,l,d,f=function(){return function(){var t=Object(i.a)(u.a.mark((function t(e){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(b.i)()),t.prev=1,t.next=4,s.a.get("/contacts");case 4:n=t.sent,r=n.data,e(Object(b.j)(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(Object(b.h)(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},O=function(t,e){return function(){var n=Object(i.a)(u.a.mark((function n(r){var c,a,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={name:t,number:e},r(Object(b.b)()),n.prev=2,n.next=5,s.a.post("/contacts",c);case 5:a=n.sent,i=a.data,r(Object(b.c)(i)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),r(Object(b.a)(n.t0));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(t){return n.apply(this,arguments)}}()},h=function(t){return function(e){e(Object(b.f)()),s.a.delete("contacts/".concat(t)).then((function(){return e(Object(b.g)(t))})).catch((function(t){return e(Object(b.e)(t))}))}},p=n(39),g=function(t){return t.contacts.items},v=function(t){return t.contacts.filter},x=function(t){return t.contacts.isLoading},m=function(t){return t.contacts.error},N=Object(p.a)([g,v],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)})).sort((function(t,e){var n=t.name.toUpperCase(),r=e.name.toUpperCase();return n<r?-1:n>r?1:0}))})),k=n(4),_=n(43),L=n(5),y=n(15),w=Object(L.c)([],(j={},Object(k.a)(j,b.j,(function(t,e){return e.payload})),Object(k.a)(j,b.c,(function(t,e){var n=e.payload;return[].concat(Object(_.a)(t),[n])})),Object(k.a)(j,b.g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),j)),C=Object(L.c)(!1,(l={},Object(k.a)(l,b.i,(function(){return!0})),Object(k.a)(l,b.j,(function(){return!1})),Object(k.a)(l,b.h,(function(){return!1})),Object(k.a)(l,b.b,(function(){return!0})),Object(k.a)(l,b.c,(function(){return!1})),Object(k.a)(l,b.a,(function(){return!1})),Object(k.a)(l,b.f,(function(){return!0})),Object(k.a)(l,b.g,(function(){return!1})),Object(k.a)(l,b.e,(function(){return!1})),l)),A=Object(L.c)(null,(d={},Object(k.a)(d,b.h,(function(t,e){return e.payload})),Object(k.a)(d,b.i,(function(){return null})),Object(k.a)(d,b.a,(function(t,e){return e.payload})),Object(k.a)(d,b.b,(function(){return null})),Object(k.a)(d,b.e,(function(t,e){return e.payload})),Object(k.a)(d,b.f,(function(){return null})),d)),I=Object(L.c)("",Object(k.a)({},b.d,(function(t,e){return e.payload}))),S=Object(y.b)({items:w,isLoading:C,error:A,filter:I})},50:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(64),c=n.n(r),a=(n(119),n(65)),u=n.n(a),i=n(3),o=function(){return Object(i.jsx)("div",{className:u.a.LoaderSpinner,children:Object(i.jsx)(c.a,{type:"Watch",color:"#00BFFF",height:100,width:100,timeout:0})})}},61:function(t,e,n){t.exports={container:"Container_container__1EOOY"}},65:function(t,e,n){t.exports={LoaderSpinner:"LoaderSpinner_LoaderSpinner__3ggx2"}},7:function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"j",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return j})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return d}));var r=n(5),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),u=Object(r.b)("contacts/fetchContactsError"),i=Object(r.b)("contacts/addContactRequest"),o=Object(r.b)("contacts/addContactSuccess"),s=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts/deleteContactRequest"),j=Object(r.b)("contacts/deleteContactSuccess"),l=Object(r.b)("contacts/deleteContactError"),d=Object(r.b)("contacts/changeFilter")}},[[125,6,7]]]);
//# sourceMappingURL=main.ed1378cf.chunk.js.map